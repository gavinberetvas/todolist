(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const n=new Uint8Array(16);function i(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(n)}const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));const o=function(t,n,o){if(e.randomUUID&&!n&&!t)return e.randomUUID();const c=(t=t||{}).random||(t.rng||i)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,n){o=o||0;for(let e=0;e<16;++e)n[o+e]=c[e];return n}return function(e,t=0){return(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase()}(c)};let c={all:[],today:[{title:"Sample Note 1",date:"2023-05-26",description:'"We are what we repeatedly do. Excellence, then, is not an act, but a habit." - Aristotle',id:"today",complete:!1},{title:"Sample Note 2",date:"2023-05-25",description:'"To live is to suffer, to survive is to find meaning in the suffering." - Friedrich Nietzsche',id:"today2",complete:!1}],tomorrow:[{title:"Sample Note 3",date:"2023-05-27",description:'"I can control my passions and emotions if I can understand their nature." - Spinoza',id:"tomorrow",complete:!1},{title:"Sample Note 4",date:"2023-05-30",description:'"It is not death that a man should fear, but he should fear never beginning to live." - Marcus Aurelius',id:"tomorrow2",complete:!0}],newNote:function(e,t){e.preventDefault();const{title:n,date:i,description:a}=e.target.elements,c=o();this[t].push({title:n.value,date:i.value,description:a.value,id:c,complete:!1}),modal.classList.remove("active"),overlay.classList.remove("active")},editNote:function(e,t,n,i){let a=e.getAttribute("data-id"),o={title:`${t}`,date:`${n}`,description:`${i}`,id:a};for(let e in c)if(Array.isArray(c[e])){const t=c[e].findIndex((e=>e.id==a));if(-1!==t){c[e][t]=o;break}}},deleteNote:function(e){let t=e.closest("[data-id]").getAttribute("data-id");for(let e in c)if(Array.isArray(c[e])){const n=c[e].findIndex((e=>e.id==t));if(-1!==n)return void c[e].splice(n,1)}},newProject:function(e){c[e]=[]},getAllObjects:function(){const e=[];for(let t in this)this.hasOwnProperty(t)&&Array.isArray(this[t])&&e.push(...this[t]);return e},saveToLocalStorage:function(){localStorage.setItem("myLibrary",JSON.stringify(this))}},r="all",s="all";function d(){event.target.classList.add("current"),document.querySelectorAll(".directory").forEach((e=>{e!=event.target&&e.classList.remove("current")}))}function l(){document.getElementById("which-directory").innerHTML=s}const u=document.getElementById("overlay");function m(e,t,n,i,a){const o=document.createElement("div"),s=document.createElement("div");s.classList.add("notecontentwrapper"),o.setAttribute("data-id",`${i}`),o.setAttribute("data-project",`${a}`),o.classList.add("card"),o.classList.add(r);const d=document.createElement("div");d.classList.add("title"),d.innerHTML=`${e}`;const l=document.createElement("input");l.classList.add("date"),l.type="date",l.value=`${t}`,l.setAttribute("data-date",`${t}`);const m=document.createElement("div");m.classList.add("description"),m.innerHTML=n,m.style.display="none",d.addEventListener("input",(function(){e=d.innerHTML})),l.addEventListener("input",(function(){t=l.value})),m.addEventListener("input",(function(){n=m.innerHTML})),o.addEventListener("click",(function(r){u.classList.add("active"),o.classList.add("focus"),o.style.zIndex=10,o.style.position="relative",d.contentEditable=!0,l.disabled=!1,m.style.display="",m.contentEditable=!0,h.style.display="",y.style.display="",f.style.display="",u.addEventListener("click",(function(){c.editNote(o,e,t,n,i,a),l.setAttribute("data-date",`${t}`),u.classList.remove("active"),o.style.zIndex=1,o.style.position="relative",o.classList.remove("focus"),m.style.display="none",f.style.display="none",h.style.display="none",y.style.display="none"}))})),o.setAttribute("data-complete",!1),o.setAttribute("data-important",!1);let p=function(e,t){const n=document.createElement("div");n.classList.add("completedcheckboxwrapper");const i=document.createElement("label");i.setAttribute("for",`completed-checkbox-${e}`);const a=document.createElement("input");a.type="checkbox",a.id=`completed-checkbox-${e}`,a.classList.add("completed-checkbox"),n.appendChild(a),n.appendChild(i);for(let t in c)if(Array.isArray(c[t])){const n=c[t].findIndex((t=>t.id==e));if(-1!==n&&1==c[t][n].complete){a.checked=!0;break}}return 1==a.checked&&t.setAttribute("data-complete",!0),a.addEventListener("change",(function(){this.checked?t.setAttribute("data-complete",!0):t.setAttribute("data-complete",!1)})),a.addEventListener("change",(function(){if(this.checked){for(let t in c)if(Array.isArray(c[t])){const n=c[t].findIndex((t=>t.id==e));if(-1!==n&&0==c[t][n].complete){a.checked=!0,c[t][n].complete=!0;break}}}else for(let t in c)if(Array.isArray(c[t])){const n=c[t].findIndex((t=>t.id==e));if(-1!==n&&1==c[t][n].complete){a.checked=!1,c[t][n].complete=!1;break}}})),n}(i,o),y=function(e,t){const n=document.createElement("div");n.classList.add("importantcheckboxwrapper");const i=document.createElement("label");i.setAttribute("for",`important-checkbox-${e}`),i.classList.add("checkbox-label");const a=document.createElement("input");a.type="checkbox",a.id=`important-checkbox-${e}`,a.classList.add("important-checkbox"),n.appendChild(a),n.appendChild(i);for(let t in c)if(Array.isArray(c[t])){const n=c[t].findIndex((t=>t.id==e));if(-1!==n&&1==c[t][n].important){a.checked=!0,i.classList.add("checked");break}}return 1==a.checked&&t.setAttribute("data-important",!0),a.addEventListener("change",(function(){this.checked?(i.classList.add("checked"),t.setAttribute("data-important",!0)):(i.classList.remove("checked"),t.setAttribute("data-important",!1))})),a.addEventListener("change",(function(){if(this.checked){for(let t in c)if(Array.isArray(c[t])){const n=c[t].findIndex((t=>t.id==e));if(-1!==n&&0==c[t][n].important){a.checked=!0,c[t][n].important=!0;break}}}else for(let t in c)if(Array.isArray(c[t])){const n=c[t].findIndex((t=>t.id==e));if(-1!==n&&1==c[t][n].important){a.checked=!1,c[t][n].important=!1;break}}})),n}(i,o);const f=document.createElement("div");let h=function(){const e=document.createElement("button");e.classList.add("button","rmv");const t=document.createElement("img");return t.setAttribute("src","trash-can-outline.svg"),t.setAttribute("alt","Delete"),t.setAttribute("title","Delete"),e.appendChild(t),e.addEventListener("click",(function(){setTimeout((function(){c.deleteNote(e),u.classList.remove("active"),e.closest(".card").remove()}),100)})),e}();return h.style.display="none",y.style.display="none",f.style.display="none",f.classList.add("buttonbox"),s.appendChild(p),s.appendChild(d),s.appendChild(l),f.appendChild(y),f.appendChild(h),o.appendChild(s),o.appendChild(m),o.appendChild(f),o}let p=[];function y(e){r=e;let t=newProjectName(e).innerHTML;s=t,l(),d(),function(){const e=document.getElementsByClassName("card");for(let t=0;t<e.length;t++){const n=e[t];n.classList.contains(r)?n.style.display="":n.style.display="none"}}();let n=newProjectName(e);n.contentEditable=!0,n.classList.add("activeproject"),n.focus()}function f(e,t){t=newProjectName.innerHTML,newProjectName.classList.remove("activeproject"),newProjectName.classList.remove("current");const n=e,i=p.findIndex((e=>e.key===n));-1!==i&&(p[i].title=t),s=newProjectName.innerHTML,l(),localStorage.setItem("projectDirectory",JSON.stringify(p))}(function(){const e=document.querySelectorAll("[data-modal-target]"),t=document.querySelectorAll("[data-close-button]"),n=document.getElementById("newtask");function i(e){null!=e&&(e.classList.remove("active"),overlay.classList.remove("active"))}e.forEach((e=>{e.addEventListener("click",(()=>{!function(e){null!=e&&(e.classList.add("active"),overlay.classList.add("active"))}(document.querySelector(e.dataset.modalTarget))}))})),overlay.addEventListener("click",(()=>{document.querySelectorAll(".modal.active").forEach((e=>{i(e)}))})),t.forEach((e=>{e.addEventListener("click",(()=>{i(e.closest(".modal"))}))})),n.addEventListener("submit",(e=>{e.preventDefault(),c.newNote(e,r),function(){const e=c[r][c[r].length-1],t=m(e.title,e.date,e.description,e.id,e.projectFilter);document.getElementById("main-content").appendChild(t)}(),localStorage.setItem("myLibrary",JSON.stringify(c))}))})(),document.getElementById("today").addEventListener("click",(function(){r="today",s="Today",function(){let e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),a=document.querySelectorAll("[data-date]");e=t+"-"+n+"-"+i,a.forEach((function(t){let n=t.getAttribute("data-date");t.closest(".card").style.display=n==e?"":"none"}))}(),l(),d()})),document.getElementById("week").addEventListener("click",(function(){r="tomorrow",s="This Week",function(){let e=new Date;e.setHours(0,0,0,0),document.querySelectorAll("[data-date]").forEach((function(t){let n=new Date(t.getAttribute("data-date"));n.setHours(0,0,0,0);let i=t.closest(".card"),a=Math.abs(n-e),o=Math.floor(a/864e5);i.style.display=o>=0&&o<=6?"":"none"}))}(),l(),d()})),document.getElementById("important").addEventListener("click",(function(){r="important",s="Important",function(){const e=document.getElementsByClassName("card");for(let t=0;t<e.length;t++){const n=e[t];let i=n.getAttribute("data-important");"true"===i?i=!0:"false"===i&&(i=!1),n.style.display=1==i?"":"none"}}(),l(),d()})),document.getElementById("completed").addEventListener("click",(function(){r="completed",s="Completed",function(){const e=document.getElementsByClassName("card");for(let t=0;t<e.length;t++){const n=e[t];let i=n.getAttribute("data-complete");"true"===i?(i=!0,n.style.display=""):"false"===i&&(i=!1,n.style.display="none")}}(),l(),d()})),document.getElementById("all").addEventListener("click",(function(){r="all",s="All Notes",function(){const e=document.getElementsByClassName("card");for(let t=0;t<e.length;t++)e[t].style.display=""}(),l(),d()})),function(){const e=localStorage.getItem("projectDirectory");let t=[];if(e){let n=document.querySelector("#projects");t=JSON.parse(e),p=t,t.forEach((e=>{let t=e.key,i=document.createElement("div");i.classList.add("directory"),i.dataset.project=`${e.key}`,i.classList.add("projectcard");let a=document.createElement("p");a.contentEditable=!0,a.innerHTML=e.title;const o=document.createElement("img");o.setAttribute("src","trash-can-outline.svg"),o.setAttribute("alt","Delete"),o.setAttribute("title","Delete"),o.classList.add("editProject"),o.dataset.delete=`${e.key}`,o.style.zIndex=2,i.addEventListener("click",(()=>{r=e.key,s=a.innerHTML,l(),d(),function(e){const t=document.getElementsByClassName("card");for(let n=0;n<t.length;n++){const i=t[n],a=i.getAttribute("data-project");i.style.display=a==e?"":"none"}}(t),a.contentEditable=!0,a.classList.add("activeproject"),a.focus()})),a.addEventListener("blur",(()=>{let t=a.innerHTML;a.classList.remove("activeproject"),a.classList.remove("current"),s=a.innerHTML,l();const n=e.key,i=p.findIndex((e=>e.key===n));-1!==i&&(p[i].title=t),localStorage.setItem("projectDirectory",JSON.stringify(p))})),o.addEventListener("click",(e=>{const n=o.dataset.delete;if(e.stopPropagation(),window.confirm("Are you sure you want to delete this project and all the notes it contains?")){const e=n,i=p.findIndex((t=>t.key===e));-1!==i&&p.splice(i,1),delete c[t],o.closest(".projectcard").remove(),document.querySelectorAll(`[data-project="${n}"]`).forEach((e=>{e.remove()}))}else console.log("delete cancel");localStorage.setItem("projectDirectory",JSON.stringify(p))})),i.appendChild(a),i.appendChild(o),n.appendChild(i)}))}}(),document.getElementById("newproject").addEventListener("click",(function(){const e=o();let t={title:"new project",key:`${e}`};p.push(t),localStorage.setItem("projectDirectory",JSON.stringify(p)),c.newProject(e),function(e){let t=function(e){let t=document.createElement("div");return t.classList.add("directory"),t.dataset.project=`${e}`,t.classList.add("projectcard"),t}(e),n=function(e){let t=document.createElement("p");return t.contentEditable=!0,t.innerHTML="New_Project",t}();const i=function(e){let t=document.createElement("img");return t.setAttribute("src","trash-can-outline.svg"),t.setAttribute("alt","Delete"),t.setAttribute("title","Delete"),t.classList.add("editProject"),t.dataset.delete=`${e}`,t.style.zIndex=2,t}(e);t.addEventListener("click",(()=>{y(e)})),n.addEventListener("blur",(()=>{f(e,n.innerHTML)})),i.addEventListener("click",(t=>{!function(e,t,n){const i=t.dataset.delete;n.stopPropagation(),window.confirm("Are you sure you want to delete this project and all the notes it contains?")?(delete c[e],t.closest(".projectcard").remove(),t.dataset.delete=`${e}`,Array.from(document.getElementsByClassName(i)).forEach((e=>{e.remove()}))):console.log("delete cancel")}(e,i,t)}));let a=document.querySelector("#projects");t.appendChild(n),t.appendChild(i),a.appendChild(t)}(e)})),function(){const e=localStorage.getItem("myLibrary");if(e){const t=JSON.parse(e);c.newNote=function(e,t){e.preventDefault();const{title:n,date:i,description:a}=e.target.elements,c=o();let r=t;this[t].push({title:n.value,date:i.value,description:a.value,id:c,projectFilter:r,complete:!1,important:!1}),modal.classList.remove("active"),overlay.classList.remove("active")},c.editNote=function(e,t,n,i){let a=e.getAttribute("data-id"),o=e.getAttribute("data-complete"),r=e.getAttribute("data-important"),s=e.getAttribute("data-project");"true"===o?o=!0:"false"===o&&(o=!1),"true"===r?r=!0:"false"===r&&(r=!1);let d={title:`${t}`,date:`${n}`,description:`${i}`,id:a,projectFilter:s,complete:o,important:r};for(let e in c)if(Array.isArray(c[e])){const t=c[e].findIndex((e=>e.id==a));if(-1!==t){c[e][t]=d;break}}},c.deleteNote=function(e){let t=e.closest("[data-id]").getAttribute("data-id");for(let e in c)if(Array.isArray(c[e])){const n=c[e].findIndex((e=>e.id==t));if(-1!==n)return void c[e].splice(n,1)}},c.newProject=function(e){c[e]=[]},c.getAllObjects=function(){const e=[];for(let t in this)this.hasOwnProperty(t)&&Array.isArray(this[t])&&e.push(...this[t]);return e},c.saveToLocalStorage=function(){localStorage.setItem("myLibrary",JSON.stringify(this))},Object.assign(c,t)}}(),c.getAllObjects().forEach((e=>{const t=m(e.title,e.date,e.description,e.id,e.projectFilter);document.getElementById("main-content").appendChild(t)})),window.addEventListener("beforeunload",(function(){c.saveToLocalStorage()}));let h=!1;document.getElementById("icon").addEventListener("click",(()=>{const e=document.getElementById("navbar");0==h?(e.style.transform="translateX(0%)",e.classList.add("active"),h=!0):(e.style.transform="translateX(-100%)",e.classList.remove("active"),h=!1)})),document.addEventListener("click",(e=>{const t=document.getElementById("navbar"),n=document.getElementById("icon");!t.contains(e.target)&&e.target!==n&&h&&(t.style.transform="translateX(-100%)",t.classList.remove("active"),h=!1)}))})();